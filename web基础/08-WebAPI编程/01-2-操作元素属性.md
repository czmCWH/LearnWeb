# æ“ä½œå…ƒç´ çš„å†…å®¹ã€å±æ€§

â€‹`JavaScript` çš„ `DOM` æ“ä½œå¯ä»¥æ”¹å˜ç½‘é¡µå†…å®¹ã€ç»“æ„å’Œæ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `DOM` æ“ä½œå…ƒç´ æ¥æ”¹å˜å…ƒç´ é‡Œé¢çš„å†…å®¹ã€å±æ€§ç­‰ã€‚ï¼ˆæ³¨æ„ï¼šè¿™äº›æ“ä½œéƒ½æ˜¯é€šè¿‡å…ƒç´ å¯¹è±¡çš„å±æ€§å®ç°çš„ï¼‰ã€‚
â€‹
## ä¸€ã€è¯»å†™å…ƒç´ çš„å†…å®¹
â€‹
â€‹* `innerText`ï¼Œä¼šå»é™¤ç©ºæ ¼å’Œæ¢è¡Œï¼Œä¸ä¼šè¯†åˆ«htmlã€‚éæ ‡å‡†
â€‹
â€‹* `innerHTML`ï¼Œä¼šä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œï¼Œä¼šè¯†åˆ«htmlã€‚w3cæ ‡å‡†
â€‹
â€‹âš ï¸ï¼šinnerText å’Œ innerHTML åªèƒ½ä¿®æ”¹æ™®é€šå…ƒç´ çš„å†…å®¹ï¼Œå¯¹äº input æ ‡ç­¾å…ƒç´ éœ€è¦é€šè¿‡å…¶å®ƒæ–¹å¼ä¿®æ”¹ã€‚

```javaScript
<div>æŸä¸ªæ—¶é—´</div>

<script>
    var box = document.querySelector('div');
    box.innerHTML = '      <b>ä½ å¥½ï¼Œ</b>    <i>2023</i>';
//  box.innerText = '      <b>ä½ å¥½ï¼Œ</b> <i>2023</i>';
</script>
```

## äºŒã€å¸¸ç”¨å…ƒç´ çš„å±æ€§æ“ä½œ

* innerHTMLï¼šæ”¹å˜å…ƒç´ å†…å®¹
* srcã€href
* idã€altã€title

* è¯»å†™å…ƒç´  element å€¼çš„è¯­æ³•ï¼š

```
console.log(å…ƒç´ å¯¹è±¡.å±æ€§å);
å…ƒç´ å¯¹è±¡.å±æ€§å = å€¼
```

* ä¿®æ”¹ srcã€titleã€href

```javaScript
<button id="btn1">å›¾ç‰‡1</button>
<button id="btn2">å›¾ç‰‡2</button><br>
<img src="images/pic1.jpg" title="å¤ªé˜³" style="width: 100px;" />
<a href="https://www.baidu.com">ç‚¹å‡»é“¾æ¥</a>

<script>
    var btn1 = document.getElementById('btn1');
    var btn2 = document.getElementById('btn2');
    var img = document.querySelector('img');
    let a = document.querySelector('a');
    
    // 2. æ³¨å†Œäº‹ä»¶  å¤„ç†ç¨‹åº
    btn1.onclick = function() {
        img.src = 'images/pic1.jpg';
        img.title = 'å¤ªé˜³';
        a.href = "https://www.baidu.com"
    }
    btn2.onclick = function() {
        img.src = 'images/pic2.jpg';
        img.title = 'æœˆäº®';
        a.href = "https://juejin.cn/"
    }
</script>
```

## ä¸‰ã€æ“ä½œ input è¡¨å•å…ƒç´ çš„å±æ€§

åˆ©ç”¨ DOM å¯ä»¥æ“ä½œå¦‚ä¸‹ inputè¡¨å•å…ƒç´ çš„å±æ€§ï¼š

```
typeã€valueã€checkedã€selectedã€disabled
```

```javaScript
<button>æŒ‰é’®</button>
<input type="text" value="è¾“å…¥å†…å®¹">

<script>
    var btn = document.querySelector('button');
    var input = document.querySelector('input');
    
    btn.onclick = function() {
    	// input.innerHTML = 'è¢«ç‚¹å‡»äº†'; ç”±äºinputä¸æ˜¯æ™®é€šçš„ç›’å­ï¼ŒinnerHTMLæ— æ³•ä¿®æ”¹å…¶å€¼ï¼›
    
    	input.value = 'è¢«ç‚¹å‡»äº†';
    	// btn.disabled = true;
    	this.disabled = true;	// thisæŒ‡å‘å‡½æ•°çš„è°ƒç”¨è€…
    }
</script>
```

## å››ã€æ“ä½œå…ƒç´ çš„ style å±æ€§

æœ‰ä¸¤ç§æ–¹å¼æ“ä½œå…ƒç´ çš„ `style`ï¼š

* `element.style.xxx`ï¼Œè¡Œå†…å¼ï¼ŒCSSä¿®æ”¹çš„æƒé‡æ¯”è¾ƒé«˜ã€‚

* `element.className`ï¼Œç±»åæ ·å¼æ“ä½œï¼Œé€‚ç”¨äºæ ·å¼ä¿®æ”¹æ¯”è¾ƒå¤šã€‚æ­¤æ–¹å¼ä¼šç›´æ¥è¦†ç›–å…ƒç´ åŸå…ˆæœ‰çš„æ ·å¼ã€‚

```javaScript
<div></div>

<script>
    var div = document.querySelector('div');
    div.onclick = function() {
    	// âš ï¸âš ï¸âš ï¸ï¼šjsä¸­çš„æ ·å¼å±æ€§åé‡‡ç”¨é©¼å³°å‘½åæ³•
    	this.style.backgroundColor = 'purple';
    	this.style.width = '250px';
    }
</script>
```

```javaScript
<div class="first">æ–‡æœ¬</div>

<script>
    var test = document.querySelector('div');
    test.onclick = function() {
        // å¦‚æœæƒ³è¦ä¿ç•™åŸå…ˆçš„ç±»åï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš å¤šç±»åé€‰æ‹©å™¨
        // this.className = 'change';
        this.className = 'first change';
    }
</script>
```

ä¾‹å­ğŸŒ°ï¼šinputè¡¨å•è¾“å…¥æ¡†ï¼Œå ä½æ–‡å­—çš„é¢œè‰²

```javaScript
<style>
	input {
		color: #999;
	}
</style>

<input type="text" value="è¯·è¾“å…¥å†…å®¹">

<script>
    var text = document.querySelector('input');

    text.onfocus = function() {
    	console.log('è·å¾—ç„¦ç‚¹');
    	if (this.value === 'æ‰‹æœº') {
    		this.value = '';
    	}
    	this.style.color = '#333';
    }
    
    text.onblur = function() {
    	console.log('å¤±å»ç„¦ç‚¹');
    	if (this.value === '') {
    		this.value = 'æ‰‹æœº';
    	}
    	this.style.color = '#999';
    }
</script>
```

## äº”ã€classList ä¿®æ”¹å…ƒç´ çš„ç±»é€‰æ‹©å™¨

```js
<div class="one two"></div>
<button> åˆ‡æ¢å¼€å…³ç¯</button>
<script>
    // classList è¿”å›å…ƒç´ çš„ç±»å
    var div = document.querySelector('div');
    // console.log(div.classList[1]);
    
    // 1. æ·»åŠ ç±»å  æ˜¯åœ¨åé¢è¿½åŠ ç±»åä¸ä¼šè¦†ç›–ä»¥å‰çš„ç±»å æ³¨æ„å‰é¢ä¸éœ€è¦åŠ .
    div.classList.add('three');
    
    // 2. åˆ é™¤ç±»å
    div.classList.remove('one');

    // 3. åˆ‡æ¢ç±»
    var btn = document.querySelector('button');
    btn.addEventListener('click', function() {
        // toggle è¡¨ç¤ºå¦‚æœæœ‰ bg å°±åˆ é™¤ï¼›æ²¡æœ‰ bg å°±æ·»åŠ 
        document.body.classList.toggle('bg');
    })
</script>
```

## å…­ã€æ“ä½œå…ƒç´ çš„è‡ªå®šä¹‰å±æ€§å€¼

### 5.1ã€æ“ä½œå±æ€§å€¼

#### element.getAttribute('å±æ€§å') è·å–å±æ€§å€¼ï¼Œä¸»è¦é’ˆå¯¹è‡ªå®šä¹‰å±æ€§ã€‚

```javaScript
<div id="box" index="1"></div>

<script>
	var box = document.querySelector('div');
	// 1ã€ç›´æ¥ element.å±æ€§å è·å–å±æ€§çš„å€¼
	console.log(box.id);	// box

	// 2ã€element.getAttribute('å±æ€§å') å¯ä»¥è·å–è‡ªå®šä¹‰å±æ€§çš„å€¼
	// è‡ªå®šä¹‰å±æ€§æŒ‡ç¨‹åºå‘˜æ·»åŠ çš„å±æ€§
	console.log(box.getAttribute('id')); // box
	
	console.log(box.getAttribute('index')); // 1
</script>
```

#### element.setAttribute(å±æ€§å, å€¼); è®¾ç½®å±æ€§å€¼ï¼Œä¸»è¦é’ˆå¯¹è‡ªå®šä¹‰å±æ€§ã€‚

```javaScript
<div id="box" index="1"></div>

<script>
	var box = document.querySelector('div');
	box.id = 'borderBox';

	box.setAttribute('index', '123');
	box.setAttribute('class', 'nav');	// è®¾ç½®Classæ¯”è¾ƒç‰¹æ®Šï¼Œè€Œä¸æ˜¯className;
	console.log(box.id, box.getAttribute('index'));

</script>
```

#### element.removeAttribute(å±æ€§å); ç§»é™¤å±æ€§ï¼Œä¸»è¦é’ˆå¯¹è‡ªå®šä¹‰å±æ€§ã€‚

```javaScript
box.removeAttribute('index');
console.log(box.getAttribute('index'));
```

## ä¸ƒã€è‡ªå®šä¹‰å±æ€§

> H5è‡ªå®šä¹‰å±æ€§çš„ç›®çš„ï¼šä¸ºäº†**ä¿å­˜ä½¿ç”¨æ•°æ®**ã€‚æœ‰äº›æ•°æ®å¯ä»¥ä¿å­˜åˆ°é¡µé¢ä¸­ï¼Œè€Œä¸ç”¨ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚

è‡ªå®šä¹‰å±æ€§è·å–æ˜¯é€šè¿‡getAttribute(â€˜å±æ€§â€™) è·å–ã€‚ä½†æ˜¯æœ‰äº›è‡ªå®šä¹‰å±æ€§å¾ˆå®¹æ˜“å¼•èµ·æ­§ä¹‰ï¼Œä¸å®¹æ˜“åˆ¤æ–­æ˜¯å…ƒç´ çš„å†…ç½®å±æ€§è¿˜æ˜¯è‡ªå®šä¹‰å±æ€§ã€‚

> ä¸ºäº†åŒºåˆ†è‡ªå®šä¹‰å±æ€§å’Œå†…ç½®å±æ€§ï¼ŒH5è§„å®šäº†è‡ªå®šä¹‰å±æ€§çš„è§„èŒƒã€‚H5è§„å®š**è‡ªå®šä¹‰å±æ€§dataå¼€å¤´**åšä¸ºå±æ€§åå¹¶ä¸”èµ‹å€¼ã€‚

```javaScript
<div data-index="2" data-list-name="tom"></div>

var box = document.querySelector('div');
console.log(box.getAttribute('data-index'));

box.setAttribute('data-time', 222);
console.log(box.getAttribute('data-time'));
```

* `element.dataset` h5æ–°å¢è·å–è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³•ï¼ŒIE10ä»¥ä¸Šæ‰æ”¯æŒã€‚

```javaScript
<script type="text/javascript">
    // dataset æ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢å­˜æ”¾äº†æ‰€æœ‰ä»¥ data- å¼€å¤´çš„è‡ªå®šä¹‰å±æ€§ã€‚
    onsole.log(box.dataset);
    console.log(box.dataset.index, box.dataset.time);
    // âš ï¸âš ï¸âš ï¸ï¼šå¦‚æœè‡ªå®šä¹‰å±æ€§é‡Œé¢æœ‰å¤šä¸ª-é“¾æ¥çš„å•è¯ï¼Œè·å–çš„æ—¶å€™é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚
    console.log(box.dataset.listName, box.dataset['listName']);
</script>
```

## å…«ã€ç²¾çµå›¾ç‰‡
å¦‚ä¸‹ç²¾çµå›¾ï¼Œæ¯ä¸ªå›¾æ ‡ Yè½´æ–¹å‘ç›¸éš”çš„ä½ç½®æ˜¯ 44pxï¼š
![sprite](assets/sprite.png)

```html
<div class="box">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>

<script>
    // 1. è·å–å…ƒç´  æ‰€æœ‰çš„å°li 
    var lis = document.querySelectorAll('li');
    for (var i = 0; i < lis.length; i++) {
        // è®©ç´¢å¼•å· ä¹˜ä»¥ 44 å°±æ˜¯æ¯ä¸ªli çš„èƒŒæ™¯yåæ ‡  indexå°±æ˜¯æˆ‘ä»¬çš„yåæ ‡
        var offY = i * 44;
        // æ³¨æ„Yçš„åæ ‡æ˜¯è´Ÿæ•°ï¼Œç›´æ¥ç”¨å­—ç¬¦ä¸²æ‹¼æ¥å³å¯ 
        lis[i].style.backgroundPosition = '0 -' + offY + 'px';
    }
</script>
```