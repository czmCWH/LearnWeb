# i18n - 国际化 

<https://mobile.ant.design/zh/guide/i18n>，语言标识对照表

## 1、安装 react-i18next 及相关依赖
```shell
$ npm install i18next react-i18next @types/i18next @types/react-i18next
```

- `i18next`: 核心库。
- `react-i18next`: React 专用的绑定库（支持 Hooks）。
- `i18next-browser-languagedetector`: 自动检测浏览器语言。

```shell
$ npm install i18next react-i18next i18next-browser-languagedetector
```

## 2、配置 i18next

在项目根目录下创建一个名为 src/i18n.ts 的文件，用于初始化 i18next 配置。


```ts
// src/i18n.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

// 定义翻译资源
const resources = {
  en: {
    translation: {
      "Welcome to React": "Welcome to React and react-i18next",
    }
  },
  zh: {
    translation: {
      "Welcome to React": "欢迎来到 React 和 react-i18next",
    }
  }
};

i18n
  .use(initReactI18next) // 初始化 react-i18next 插件
  .init({
    resources,
    lng: "zh", // 默认语言
    interpolation: {
      escapeValue: false // 不需要转义 HTML
    }
  });

export default i18n;
```

## 3、在 main.tsx 文件中导入之前定义的国际化配置。

```ts
import './i18n'; // 引入国际化配置

const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

```


## 4、改变当前的语言设置

使用 useTranslation 来获取翻译文本

```tsx
import { useEffect, useState } from 'react';
import { useTranslation } from 'react-i18next';

function App() {
  const { t, i18n } = useTranslation();
  const [language, setLanguage] = useState('zh');

  useEffect(() => {
    i18n.changeLanguage(language);
  }, [language, i18n]);

  return (
    <div className="App">
      <button onClick={() => setLanguage(language === 'zh' ? 'en' : 'zh')}>
        Change Language
      </button>
      <header className="App-header">
        <p>{t('Welcome to React')}</p>
      </header>
    </div>
  );
}
```